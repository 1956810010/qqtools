{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{235:function(e,t,n){e.exports={toolsBox:\"_14-Ls\",tableBox:\"_2Gy1Q\",fl:\"_18ATS\",fr:\"_VYDZ6\",mr10:\"_1Kii0\",ml10:\"_1-Wdi\",affix:\"_xTYxE\"}},243:function(e,t,n){\"use strict\";(function(e){function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",function(){return c}),n.d(t,\"b\",function(){return l}),n.d(t,\"d\",function(){return m}),n.d(t,\"c\",function(){return d});const s=e.require(\"request\"),o={os:\"android\",IMEI:\"864394020501237\",version:\"5.0.0\",Connection:\"Keep-Alive\"},r={method:\"POST\",headers:o,json:!0};function c(e,t){return new Promise((n,i)=>{s(a({},r,{uri:\"https://puser.48.cn/usersystem/api/user/v1/login/phone\",body:{password:t,account:e,longitude:0,latitude:0}}),(e,t,a)=>{e?i(e):n(a)})}).catch(e=>{console.error(e)})}function l(e){return new Promise((t,n)=>{s(a({},r,{uri:\"https://puser.48.cn/usersystem/api/user/member/v1/fans/room\",body:{memberId:e}}),(e,a,i)=>{e?n(e):t(i)})}).catch(e=>{console.error(e)})}function m(e){return new Promise((t,n)=>{s(a({},r,{uri:`https://puser.48.cn/usersystem/api/user/v1/show/info/${e}`,body:{needRecommend:!1,needChatInfo:!1,needFriendsNum:!1}}),(e,a,i)=>{e?n(e):t(i)})}).catch(e=>{console.error(e)})}function d(e,t,n=1){return new Promise((i,r)=>{s({uri:\"https://pjuju.48.cn/imsystem/api/im/v1/member/room/message/mainpage\",method:\"POST\",headers:a({},o,{token:t}),json:!0,body:{roomId:e,chatType:0,lastTime:0,limit:n}},(e,t,n)=>{e?r(e):i(n)})}).catch(e=>{console.error(e)})}}).call(this,n(28))},246:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return l}),n.d(t,\"b\",function(){return d}),n.d(t,\"d\",function(){return u}),n.d(t,\"e\",function(){return p});var a=n(476),i=n(471),s=n(35),o=n(34),r=n(124);const c={qqLoginList:Object(s.List)([]),optionList:Object(s.List)([]),kd48LiveListenerTimer:null},l=Object(a.a)(\"获取已登录的列表\"),m=Object(a.a)(\"配置列表\"),d=r.a.cursorAction({objectStoreName:o.a.indexeddb.objectStore[0].name,successAction:m}),u=r.a.getAction({objectStoreName:o.a.indexeddb.objectStore[2].name}),p=Object(a.a)(\"口袋直播监听\"),h=Object(i.a)({[l]:(e,t)=>e.set(\"qqLoginList\",Object(s.List)(t.payload.qqLoginList)),[m]:(e,t)=>{const n=\"optionList\"in t.payload?t.payload.optionList:t.payload.result;return e.set(\"optionList\",Object(s.List)(n))},[p]:(e,t)=>e.set(\"kd48LiveListenerTimer\",t.payload.timer)},Object(s.fromJS)(c));t.c={login:h}},298:function(e,t,n){e.exports={body:\"_pAjHC\",o:\"_1aNPZ\",zhuyi:\"_1HaTN\",noOption:\"_1B05i\",changeOption:\"_2it8c\",select:\"_2rSaM\",detail:\"_GRRZG\",tdGTitle:\"_1XHhN\",tdTitle:\"_1Uptq\",on:\"_34e7M\",off:\"_2i07F\",td1:\"_13LJM\",td2:\"__xj2B\"}},299:function(e,t,n){\"use strict\";var a=n(229),i=n.n(a),s=n(426);t.a=function(e){const t=Object(s.a)(`pro_id=${e}`);return new Promise((e,n)=>{i.a.ajax({type:\"POST\",url:\"https://wds.modian.com/api/project/detail\",cache:!0,data:t,dataType:\"json\",success(t,n,a){const i=t.data[0];e({title:i.pro_name,already_raised:i.already_raised,goal:i.goal,backer_count:i.backer_count,end_time:i.end_time})},error(e){n(e)}})}).catch(e=>{console.error(e)})}},300:function(e,t,n){\"use strict\";(function(e){const n=e.require(\"https\"),a={hostname:\"plive.48.cn\",port:null,path:\"/livesystem/api/live/v1/memberLivePage\",method:\"POST\",headers:{os:\"android\",\"User-Agent\":\"Mobile_Pocket\",IMEI:\"864394020228161\",token:\"0\",version:\"4.0.4\",\"Content-Type\":\"application/json;charset=utf-8\",Host:\"plive.48.cn\",Connection:\"Keep-Alive\",\"Accept-Encoding\":\"gzip\"},timeout:2e4};t.a=function(e=0){return new Promise((t,i)=>{const s=n.request(a,e=>{let n=\"\";e.setEncoding(\"utf8\"),e.on(\"data\",function(e){n+=e}),e.on(\"end\",function(){t(n)})});s.on(\"error\",function(e){i(e),console.log(\"错误：\"+e.message)}),s.write(function(e){return`{\"lastTime\":${e},\"limit\":20,\"groupId\":0,\"memberId\":0,\"type\":0,\"giftUpdTime\":1490857731000}`}(e)),s.end()}).catch(e=>{console.error(e)})}}).call(this,n(28))},311:function(e,t,n){\"use strict\";(function(e){n(258);var a,i,s,o=n(256),r=(n(245),n(261)),c=(n(260),n(247)),l=(n(122),n(75)),m=n(0),d=n.n(m),u=n(1),p=n.n(u),h=n(29),b=n(81),g=n(468),L=n(123),v=n(8),f=n.n(v),E=n(235),k=n.n(E),T=n(246);const S=e=>e.has(\"login\")?e.get(\"login\"):null,y=Object(L.createStructuredSelector)({qqLoginList:Object(L.createSelector)(S,e=>null!==e?e.get(\"qqLoginList\").toJS():[]),kd48LiveListenerTimer:Object(L.createSelector)(S,e=>null!==e?e.get(\"kd48LiveListenerTimer\"):null)});let N=Object(b.b)(y,e=>({action:Object(h.b)({changeQQLoginList:T.a,kd48LiveListenerTimer:T.e},e)}))((s=i=class extends m.Component{columus(){return[{title:\"配置名称\",key:\"optionName\",width:\"25%\",render:(e,t)=>t.option.name},{title:\"QQ号\",key:\"qqNumber\",width:\"25%\",render:(e,t)=>t.qq},{title:\"监听群号\",key:\"groupNumber\",width:\"25%\",render:(e,t)=>t.option.groupNumber},{title:\"操作\",key:\"handle\",width:\"25%\",render:(e,t)=>d.a.createElement(c.a,{title:\"确认要退出吗？\",onConfirm:this.handleLogOutClick.bind(this,t)},d.a.createElement(l.a,{type:\"danger\",size:\"small\",icon:\"logout\"},\"退出\"))}]}handleLogOutClick(t,n){const a=this.props.qqLoginList.indexOf(t);if(t.outAndClear(),this.props.qqLoginList.splice(a,1),this.props.action.changeQQLoginList({qqLoginList:this.props.qqLoginList.slice()}),null!==this.props.kd48LiveListenerTimer){let t=!1;for(let e=0,n=this.props.qqLoginList.length;e<n;e++){const n=this.props.qqLoginList[e];if(n.option.basic.is48LiveListener&&n.members){t=!0;break}}!1===t&&(e.clearInterval(this.props.kd48LiveListenerTimer),this.props.action.kd48LiveListenerTimer({timer:null}))}}render(){return[d.a.createElement(r.a,{key:\"affix\",className:k.a.affix},d.a.createElement(\"div\",{className:f()(k.a.toolsBox,\"clearfix\")},d.a.createElement(\"div\",{className:k.a.fl},d.a.createElement(g.a,{className:k.a.mr10,to:\"/Login/Login\"},d.a.createElement(l.a,{type:\"primary\",icon:\"windows-o\"},\"登录\"))),d.a.createElement(\"div\",{className:k.a.fr},d.a.createElement(g.a,{className:k.a.ml10,to:\"/\"},d.a.createElement(l.a,{type:\"danger\",icon:\"poweroff\"},\"返回\"))))),d.a.createElement(\"div\",{key:\"tableBox\",className:k.a.tableBox},d.a.createElement(o.a,{bordered:!0,columns:this.columus(),rowKey:e=>e.time,dataSource:this.props.qqLoginList,pagination:{pageSize:20,showQuickJumper:!0}}))]}},w=i,O=\"propTypes\",M={qqLoginList:p.a.array,kd48LiveListenerTimer:p.a.number,action:p.a.objectOf(p.a.func)},O in w?Object.defineProperty(w,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):w[O]=M,a=s))||a;var w,O,M;t.a=N}).call(this,n(28))},423:function(e,t,n){\"use strict\";(function(e){n(122);var a,i,s,o,r=n(75),c=(n(78),n(42)),l=(n(276),n(273)),m=n(0),d=n.n(m),u=n(1),p=n.n(u),h=n(29),b=n(81),g=n(475),L=n(468),v=n(123),f=n(72),E=n.n(f),k=n(298),T=n.n(k),S=n(235),y=n.n(S),N=n(425),w=n(246),O=n(466),M=n(428),j=n(299),I=n(79),q=n(429),_=n(431),$=n.n(_),x=n(432),P=n.n(x),W=n(243);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=e.require(\"node-schedule\");let G=null,J=null;const R=e=>e.has(\"login\")?e.get(\"login\"):null,Q=Object(v.createStructuredSelector)({qqLoginList:Object(v.createSelector)(R,e=>null!==e?e.get(\"qqLoginList\").toJS():[]),optionList:Object(v.createSelector)(R,e=>null!==e?e.get(\"optionList\").toJS():[]),kd48LiveListenerTimer:Object(v.createSelector)(R,e=>null!==e?e.get(\"kd48LiveListenerTimer\"):null)});let D=(a=Object(b.b)(Q,e=>({action:Object(h.b)({changeQQLoginList:w.a,cursorOption:w.b,kd48LiveListenerTimer:w.e,getLoginInformation:w.d},e)})),Object(g.a)(i=a((o=s=class extends m.Component{constructor(){super(...arguments),A(this,\"state\",void 0),this.state={btnLoading:!1,optionItemIndex:null}}UNSAFE_componentWillMount(){this.props.action.cursorOption({query:{indexName:\"time\"}})}selectOptionView(){return this.props.optionList.map((e,t)=>{const n=`${t}`;return d.a.createElement(l.a.Option,{key:n,value:n},e.name)})}handleOptionSelect(e,t){this.setState({optionItemIndex:e})}async loginSuccess(){try{const t=G.option.basic;if(G.time=E()().unix(),t.isModian){const{title:e,goal:n}=await Object(j.a)(t.modianId);G.modianTitle=e,G.modianGoal=n,G.modianWorker=new $.a,G.modianWorker.postMessage({type:\"init\",modianId:t.modianId,title:e,goal:n}),G.modianWorker.addEventListener(\"message\",G.listenModianWorkerCbInformation.bind(G),!1),c.a.success(\"摩点监听已就绪。\")}if(t.is48LiveListener&&(G.members=Object(I.d)(t.kd48LiveListenerMembers),G.memberId=Object(I.c)(t.kd48LiveListenerMembers),await Object(q.b)(),null===this.props.kd48LiveListenerTimer&&this.props.action.kd48LiveListenerTimer({timer:e.setInterval(q.a,15e3)}),c.a.success(\"口袋48直播监听已就绪。\")),t.isRoomListener){const n=await this.props.action.getLoginInformation({query:\"loginInformation\"});if(void 0!==n.result){G.kouDai48Token=n.result.value.token;const a=await Object(W.c)(t.roomId,G.kouDai48Token);G.roomLastTime=a.content.data[0].msgTime,G.roomListenerTimer=e.setTimeout(G.listenRoomMessage.bind(G),t.liveListeningInterval?1e3*t.liveListeningInterval:15e3)}c.a.success(\"口袋48房间监听已就绪。\")}t.isWeiboListener&&(G.weiboWorker=new P.a,G.weiboWorker.postMessage({type:\"init\",containerid:t.lfid}),G.weiboWorker.addEventListener(\"message\",G.listenWeiboWorkerCbInformation.bind(G),!1),c.a.success(\"微博监听已就绪。\")),t.isTimingMessagePush&&(G.timingMessagePushTimer=C.scheduleJob(t.timingMessagePushFormat,G.timingMessagePush.bind(G,t.timingMessagePushText)),c.a.success(\"群内定时消息推送已就绪。\"));const n=this.props.qqLoginList;n.push(G),this.props.action.changeQQLoginList({qqLoginList:n}),G=null,this.props.history.push(\"/Login\")}catch(e){console.error(e)}}loginCb(){!0===G.isEventSuccess&&!0===G.isApiSuccess?this.loginSuccess():!0===G.isError?(G=null,this.setState({btnLoading:!1})):J=setTimeout(this.loginCb.bind(this),100)}handleLoginClick(e){this.setState({btnLoading:!0});const t=this.props.optionList[Number(this.state.optionItemIndex)];(G=new N.a(t.qqNumber,t.socketPort,O.a)).option=t,G.init(),this.loginCb()}componentWillUnmount(){if(J&&e.clearInterval(J),null!==G){if(G.outAndClear(),null!==this.props.kd48LiveListenerTimer){let t=!1;for(let e=0,n=this.props.qqLoginList.length;e<n;e++){const n=this.props.qqLoginList[e];if(n.option.basic.is48LiveListener&&n.members){t=!0;break}}!1===t&&(e.clearInterval(this.props.kd48LiveListenerTimer),this.props.action.kd48LiveListenerTimer({timer:null}))}G=null}}render(){const e=this.state.optionItemIndex?Number(this.state.optionItemIndex):null;return d.a.createElement(\"div\",{className:T.a.body},d.a.createElement(\"div\",{className:T.a.changeOption},d.a.createElement(\"p\",{className:T.a.zhuyi},\"注意：要先登录酷Q！\"),d.a.createElement(\"label\",null,\"选择一个配置文件：\"),d.a.createElement(l.a,{className:T.a.select,dropdownClassName:T.a.select,value:this.state.optionItemIndex,onSelect:this.handleOptionSelect.bind(this)},this.selectOptionView()),d.a.createElement(L.a,{className:y.a.ml10,to:\"/Login\"},d.a.createElement(r.a,{type:\"danger\"},\"返回\")),d.a.createElement(r.a,{className:y.a.ml10,type:\"primary\",loading:this.state.btnLoading,disabled:!this.state.optionItemIndex,onClick:this.handleLoginClick.bind(this)},\"连接\")),d.a.createElement(M.a,{detail:null===e?null:this.props.optionList[e]}))}},A(s,\"propTypes\",{qqLoginList:p.a.array,optionList:p.a.array,kd48LiveListenerTimer:p.a.number,action:p.a.objectOf(p.a.func),history:p.a.object,location:p.a.object,match:p.a.object}),i=o))||i)||i);t.a=D}).call(this,n(28))},425:function(e,t,n){\"use strict\";(function(e){n(78);var a=n(42),i=n(243),s=n(79);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=class{constructor(e,t,n){o(this,\"time\",void 0),o(this,\"qq\",void 0),o(this,\"port\",void 0),o(this,\"isError\",void 0),o(this,\"eventUrl\",void 0),o(this,\"eventSocket\",void 0),o(this,\"isEventSuccess\",void 0),o(this,\"apiUrl\",void 0),o(this,\"apiSocket\",void 0),o(this,\"isApiSuccess\",void 0),o(this,\"callback\",void 0),o(this,\"option\",void 0),o(this,\"modianTitle\",void 0),o(this,\"modianGoal\",void 0),o(this,\"modianWorker\",void 0),o(this,\"members\",void 0),o(this,\"memberId\",void 0),o(this,\"roomListenerTimer\",void 0),o(this,\"roomLastTime\",void 0),o(this,\"kouDai48Token\",void 0),o(this,\"weiboWorker\",void 0),o(this,\"timingMessagePushTimer\",void 0),o(this,\"handleOpenEventSocket\",void 0),o(this,\"handleEventSocketError\",void 0),o(this,\"handleListenerEventMessage\",void 0),o(this,\"handleOpenApiSocket\",void 0),o(this,\"handleApiSocketError\",void 0),o(this,\"handleListenerApiMessage\",void 0),this.time=null,this.qq=e,this.port=t,this.isError=!1,this.eventUrl=`ws://127.0.0.1:${this.port}/event/`,this.eventSocket=null,this.isEventSuccess=!1,this.apiUrl=`ws://127.0.0.1:${this.port}/api/`,this.apiSocket=null,this.isApiSuccess=!1,this.callback=n,this.option=null,this.modianTitle=null,this.modianGoal=null,this.modianWorker=null,this.members=null,this.memberId=null,this.roomListenerTimer=null,this.roomLastTime=null,this.kouDai48Token=null,this.weiboWorker=null,this.timingMessagePushTimer=null,this.handleOpenEventSocket=this._handleOpenSocket.bind(this,\"isEventSuccess\",\"event\"),this.handleEventSocketError=this._handleSocketError.bind(this,\"event\"),this.handleListenerEventMessage=this._handleListenerMessage.bind(this,\"event\"),this.handleOpenApiSocket=this._handleOpenSocket.bind(this,\"isApiSuccess\",\"api\"),this.handleApiSocketError=this._handleSocketError.bind(this,\"api\"),this.handleListenerApiMessage=this._handleListenerMessage.bind(this,\"api\")}_handleOpenSocket(e,t,n){this[e]=!0,a.a.success(`【${this.qq}】 Socket: ${t}连接成功！`)}_handleSocketError(e,t){this.isError=!0,a.a.error(`【${this.qq}】 Socket: ${e}连接失败！请检查酷Q的配置是否正确！`)}_handleListenerMessage(e,t){const n=JSON.parse(t.data),a=Number(this.option.groupNumber);console.log(n),\"event\"===e&&\"group_id\"in n&&n.group_id===a&&n.self_id===Number(this.qq)&&(\"group\"===n.message_type&&this.callback((null==n?void 0:n.raw_message)||n.message,this),\"notice\"!==n.post_type&&\"event\"!==n.post_type||\"group_increase\"!==n.notice_type&&\"group_increase\"!==n.event||!this.option.basic.isNewGroupMember||this.getGroupMemberInfo(n.user_id)),\"data\"in n&&\"nickname\"in n.data&&\"group_id\"in n.data&&n.data.group_id===a&&this.sendMessage(Object(s.e)(this.option.basic.welcomeNewGroupMember,{nickname:n.data.nickname}))}sendMessage(e){this.apiSocket.send(JSON.stringify({action:\"send_group_msg\",params:{group_id:Number(this.option.groupNumber),message:e}}))}getGroupMemberInfo(e){this.apiSocket.send(JSON.stringify({action:\"get_group_member_info\",params:{group_id:Number(this.option.groupNumber),user_id:e,type:\"group_member_info\"}}))}init(){this.eventSocket=new WebSocket(this.eventUrl),this.eventSocket.addEventListener(\"open\",this.handleOpenEventSocket,!1),this.eventSocket.addEventListener(\"error\",this.handleEventSocketError,!1),this.eventSocket.addEventListener(\"message\",this.handleListenerEventMessage,!1),this.apiSocket=new WebSocket(this.apiUrl),this.apiSocket.addEventListener(\"open\",this.handleOpenApiSocket,!1),this.apiSocket.addEventListener(\"error\",this.handleApiSocketError,!1),this.apiSocket.addEventListener(\"message\",this.handleListenerApiMessage,!1)}outAndClear(){this.modianWorker&&(this.modianWorker.postMessage({type:\"cancel\"}),this.modianWorker.terminate(),this.modianWorker=null),null!==this.roomListenerTimer&&e.clearTimeout(this.roomListenerTimer),this.weiboWorker&&(this.weiboWorker.postMessage({type:\"cancel\"}),this.weiboWorker.terminate(),this.weiboWorker=null),this.timingMessagePushTimer&&this.timingMessagePushTimer.cancel(),this.eventSocket.removeEventListener(\"open\",this.handleOpenEventSocket),this.eventSocket.removeEventListener(\"error\",this.handleEventSocketError),this.eventSocket.removeEventListener(\"message\",this.handleListenerEventMessage),this.apiSocket.removeEventListener(\"open\",this.handleOpenApiSocket),this.apiSocket.removeEventListener(\"error\",this.handleApiSocketError),this.apiSocket.removeEventListener(\"message\",this.handleListenerApiMessage),this.eventSocket.close(),this.apiSocket.close()}async listenModianWorkerCbInformation(e){if(\"change\"===e.data.type)try{const{data:t,alreadyRaised:n,backerCount:a,endTime:i}=e.data,{modianTemplate:o}=this.option.basic;for(let e=t.length-1;e>=0;e--){const r=t[e],c=Object(s.e)(o,{id:r.nickname,money:r.pay_amount,modianname:this.modianTitle,modianid:this.option.basic.modianId,goal:this.modianGoal,alreadyraised:n,backercount:a,endtime:i});await this.sendMessage(c)}}catch(e){console.error(e)}}async listenRoomMessage(){const t=this.option.basic,n=t.liveListeningInterval?1e3*t.liveListeningInterval:15e3;try{const t=await Object(i.c)(this.option.basic.roomId,this.kouDai48Token);if(!(200===t.status&&\"content\"in t))return void(this.roomListenerTimer=e.setTimeout(this.listenRoomMessage.bind(this),n));if(!(t.content.data[0].msgTime>this.roomLastTime))return void(this.roomListenerTimer=e.setTimeout(this.listenRoomMessage.bind(this),n));const a=await Object(i.c)(this.option.basic.roomId,this.kouDai48Token,25);if(!(200===a.status&&\"content\"in a))return void(this.roomListenerTimer=e.setTimeout(this.listenRoomMessage.bind(this),n));const s=[],o=a.content.data;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(!(t.msgTime>this.roomLastTime))break;{const e=JSON.parse(t.extInfo);switch(e.messageObject){case\"text\":s.push(`${e.senderName}：${e.text}\\n`+`时间：${t.msgTimeStr}`);break;case\"faipaiText\":const n=await Object(i.d)(e.faipaiUserId);s.push(`${n.content.userInfo.nickName}：${e.faipaiContent}\\n`+`${e.senderName}：${e.messageText}\\n`+`时间：${t.msgTimeStr}`);break;case\"image\":const a=JSON.parse(t.bodys).url;let o=`${e.senderName}：`;this.option.basic.isRoomSendImage&&(o+=`\\n[CQ:image,file=${a}]\\n`),o+=`${a}\\n`,s.push(`${o}时间：${t.msgTimeStr}`);break;case\"audio\":const r=JSON.parse(t.bodys).url;s.push(`${e.senderName} 发送了一条语音：${r}\\n`+`时间：${t.msgTimeStr}`);break;case\"videoRecord\":const c=JSON.parse(t.bodys).url;s.push(`${e.senderName} 发送了一个视频：${c}\\n`+`时间：${t.msgTimeStr}`);break;case\"live\":s.push(`${e.senderName} 正在直播\\n`+`直播间：${e.referenceTitle}\\n`+`直播标题：${e.referenceContent}\\n`+`时间：${t.msgTimeStr}`);break;case\"idolFlip\":s.push(`${e.senderName} 翻牌了 ${e.idolFlipUserName}的问题：\\n`+`${e.idolFlipContent}\\n`+`时间：${t.msgTimeStr}`)}}}for(let e=s.length-1;e>=0;e--)await this.sendMessage(s[e]);this.roomLastTime=o[0].msgTime}catch(e){console.error(e)}this.roomListenerTimer=e.setTimeout(this.listenRoomMessage.bind(this),n)}async listenWeiboWorkerCbInformation(e){if(\"change\"===e.data.type)try{const{data:t}=e.data;for(let e=t.length-1;e>=0;e--){const n=t[e];await this.sendMessage(n)}}catch(e){console.error(e)}}async timingMessagePush(e){try{await this.sendMessage(e)}catch(e){console.error(e)}}}}).call(this,n(28))},426:function(e,t,n){\"use strict\";(function(e){const n=e.require(\"md5.js\"),a=\"das41aq6\";t.a=function(e){return e+`&sign=${(new n).update(e+\"&p=\"+a).digest(\"hex\").substr(5,16)}`}}).call(this,n(28))},427:function(e,t,n){e.exports=function(){return new Worker(n.p+\"script/93295.worker.js\")}},428:function(e,t,n){\"use strict\";var a=n(0),i=n.n(a),s=n(8),o=n.n(s),r=n(229),c=n.n(r),l=n(298),m=n.n(l);t.a=(e=>{if(!e.detail)return null;const{detail:t}=e;return i.a.createElement(\"table\",{className:m.a.detail},i.a.createElement(\"tbody\",null,i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:o()(m.a.td1,m.a.tdTitle)},\"配置名称\"),i.a.createElement(\"td\",{className:m.a.td2},t.name),i.a.createElement(\"td\",{className:o()(m.a.td1,m.a.tdTitle)},\"QQ号\"),i.a.createElement(\"td\",{className:m.a.td2},t.qqNumber)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:o()(m.a.td1,m.a.tdTitle)},\"群号\"),i.a.createElement(\"td\",{className:m.a.td2},t.groupNumber),i.a.createElement(\"td\",{className:o()(m.a.td1,m.a.tdTitle)},\"socket端口\"),i.a.createElement(\"td\",{className:m.a.td2},t.socketPort)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"摩点项目配置：\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启摩点项目监听功能\"),i.a.createElement(\"td\",null,t.basic.isModian?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\")),i.a.createElement(\"td\",{className:m.a.tdTitle},\"摩点项目ID\"),i.a.createElement(\"td\",null,t.basic.modianId)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"摩点项目命令\"),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,t.basic.modianUrlTemplate))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"摩点项目模板\"),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,t.basic.modianTemplate))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"直播监听\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启口袋48直播监听功能\"),i.a.createElement(\"td\",null,t.basic.is48LiveListener?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\"))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"监听成员\"),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,t.basic.kd48LiveListenerMembers))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"成员房间信息监听\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启成员房间信息监听功能\"),i.a.createElement(\"td\",null,t.basic.isRoomListener?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\")),i.a.createElement(\"td\",{className:m.a.tdTitle},\"房间ID\"),i.a.createElement(\"td\",null,t.basic.roomId)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"发送图片和图片链接（只限于酷QPro版本）\"),i.a.createElement(\"td\",null,t.basic.isRoomSendImage?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\")),i.a.createElement(\"td\",{className:m.a.tdTitle},\"监听间隔（秒）\"),i.a.createElement(\"td\",null,t.basic.liveListeningInterval)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"微博监听\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启微博监听功能\"),i.a.createElement(\"td\",null,t.basic.isWeiboListener?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\")),i.a.createElement(\"td\",{className:m.a.tdTitle},\"微博lfid\"),i.a.createElement(\"td\",null,t.basic.lfid)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"欢迎新成员\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启欢迎新成员功能\"),i.a.createElement(\"td\",null,t.basic.isNewGroupMember?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\"))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"欢迎词\"),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,t.basic.welcomeNewGroupMember))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"群内定时消息推送功能\")),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"开启群内定时消息推送功能\"),i.a.createElement(\"td\",null,t.basic.isTimingMessagePush?i.a.createElement(\"span\",{className:m.a.on},\"开启\"):i.a.createElement(\"span\",{className:m.a.off},\"未开启\")),i.a.createElement(\"td\",{className:m.a.tdTitle},\"规则配置\"),i.a.createElement(\"td\",null,t.basic.timingMessagePushFormat)),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdTitle},\"推送消息\"),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,t.basic.timingMessagePushText))),i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{className:m.a.tdGTitle,colSpan:4},\"自定义命令\")),function(e){const t=[];return c.a.each(e,(e,n)=>{t.push({command:e,text:n})}),0===t.length?i.a.createElement(\"tr\",null,i.a.createElement(\"td\",{colSpan:4},\"无自定义命令\")):t.map((e,t)=>i.a.createElement(\"tr\",{key:e.command},i.a.createElement(\"td\",null,e.command),i.a.createElement(\"td\",{colSpan:3},i.a.createElement(\"pre\",null,e.text))))}(t.custom)))})},429:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return d});var a=n(229),i=n.n(a),s=n(300),o=n(79),r=n(49),c=n(430),l=n.n(c);let m={};async function d(){try{const e=await Object(s.a)(),t=JSON.parse(e);200===t.status&&\"liveList\"in t.content&&(m=function(e){const t={};return i.a.each(e,(e,n)=>{t[n.liveId]=n}),t}(t.content.liveList))}catch(e){console.error(e)}}t.a=async function(){try{const e=await Object(s.a)(),t=JSON.parse(e);let n=[];200===t.status&&\"liveList\"in t.content&&(n=t.content.liveList);const a=new l.a,i=async e=>{const{newDataObj:t,newLive:n}=e.data;if(m=t,n.length>0){const e=r.a.getState().get(\"login\").get(\"qqLoginList\"),t=e instanceof Array?e:e.toJS();for(let e=n.length-1,a=t.length;e>=0;e--){const i=n[e];for(let e=0;e<a;e++){const n=t[e];if(n.option.basic.is48LiveListener&&(n.option.basic.isListenerAll||n.members&&n.members.test(i.title)||n.memberId&&n.memberId.includes(i.memberId))){const e=i.title.split(\"的\")[0],t=i.subTitle,a=Object(o.f)(\"YY-MM-DD hh:mm:ss\",i.startTime),s=i.streamPath,r=n,c=`${e} 开启了一个${1===i.liveType?\"直播\":\"电台\"}。\\n`+`直播标题：${t}\\n`+`开始时间：${a}\\n`+`视频地址：${s}`;await r.sendMessage(c)}}}}a.removeEventListener(\"message\",i),a.terminate()};a.addEventListener(\"message\",i,!1),a.postMessage({oldData:m,newData:n})}catch(e){console.error(e)}}},430:function(e,t,n){e.exports=function(){return new Worker(n.p+\"script/b7b97.worker.js\")}},431:function(e,t,n){e.exports=function(){return new Worker(n.p+\"script/a3640.worker.js\")}},432:function(e,t,n){e.exports=function(){return new Worker(n.p+\"script/83528.worker.js\")}},466:function(e,t,n){\"use strict\";var a=n(299),i=n(79),s=n(427),o=n.n(s);var r=function(e,t){if(e[2]||(e[2]=\"20\"),t.option.basic.isModian)switch(e[1]){case\"0\":case\"项目信息\":!async function(e){const t=await Object(a.a)(e.option.basic.modianId);await e.sendMessage(`${e.modianTitle}: ￥${t.already_raised} / ￥${e.modianGoal}，`+`\\n集资人数：${t.backer_count}\\n项目截至日期：${t.end_time}`)}(t);break;case\"1\":case\"聚聚榜\":case\"2\":case\"打卡榜\":\"聚聚榜\"===e[1]?e[1]=\"1\":\"打卡榜\"===e[1]&&(e[1]=\"2\"),async function(e,t,n,a){try{const i=new o.a,s=async e=>{await a.sendMessage(e.data.text),i.removeEventListener(\"message\",s),i.terminate()};i.addEventListener(\"message\",s,!1),i.postMessage({proId:e,type:t,size:n,title:a.modianTitle})}catch(e){console.error(e)}}(t.option.basic.modianId,e[1],e[2],t);break;case\"3\":case\"订单\":!async function(e,t,n){const a=new o.a,i=async e=>{await n.sendMessage(e.data.text),a.removeEventListener(\"message\",i),a.terminate()};a.addEventListener(\"message\",i,!1),a.postMessage({proId:e,type:\"订单\",size:t,title:n.modianTitle})}(t.option.basic.modianId,e[2],t);break;default:!async function(e){try{const t=Object(i.e)(e.option.basic.modianUrlTemplate,{modianname:e.modianTitle,modianid:e.option.basic.modianId});await e.sendMessage(t)}catch(e){console.error(e)}}(t)}else t.sendMessage(\"[WARNING] 摩点相关功能未开启。\")},c=n(229),l=n.n(c),m=n(300);var d=function(e){e.option.basic.is48LiveListener?async function(e){try{const t=await Object(m.a)(),n=JSON.parse(t);let a=null;if(200===n.status)if(\"liveList\"in n.content&&n.content.liveList.length>0){const{liveList:e}=n.content;a=`口袋48直播：（当前直播成员数：${e.length}）`,l.a.each(e,(e,t)=>{a+=`\\n${e+1}、${t.title.split(\"的\")[0]}\\n`+`标题：${t.subTitle}\\n`+`开始时间：${Object(i.f)(\"YY-MM-DD hh:mm:ss\",t.startTime)}`})}else a=\"口袋48直播：\\n当前无直播。\";else a=\"[ERROR] 获取口袋48直播列表错误。'\";await e.sendMessage(a)}catch(e){console.error(e)}}(e):e.sendMessage(\"[WARNING] 口袋48直播相关功能未开启。\")};var u=function(e,t){e[0]in t.option.custom&&t.sendMessage(t.option.custom[e[0]])};var p=async function(e){try{const t=\"【帮助】\\n  · [摩点 或 mod]:查看当前微打赏链接\\n  · [(摩点 或 mod) (0 或 项目信息)]:查看当前已集资数\\n  · [(摩点 或 mod) (1 或 聚聚榜) ?number]:查看聚聚榜\\n  · [(摩点 或 mod) (2 或 打卡榜) ?number]:查看打卡榜\\n  · [(摩点 或 mod) (3 或 订单) ?number]:订单查询\\n  · [直播列表 或 zb]:查看当前的口袋48直播列表\\n  · [help]：帮助\";let n=\"【自定义命令】\";l.a.each(e.option.custom,(e,t)=>{n+=\"\\n · \"+e}),await e.sendMessage(t),await e.sendMessage(n)}catch(e){console.error(e)}};t.a=function(e,t){const n=e.split(/\\s+/);for(let e=n.length-1;e>=0;e--)\"\"===n[e]&&n.splice(e,1);!function(e,t){switch(e[0]){case\"摩点\":case\"mod\":r(e,t);break;case\"直播列表\":case\"zb\":d(t);break;case\"help\":p(t);break;default:u(e,t)}}(n,t)}},470:function(e,t,n){\"use strict\";n.r(t);var a=n(0),i=n.n(a),s=n(477),o=n(469),r=n(311),c=n(423),l=n(246);n.d(t,\"reducer\",function(){return l.c});t.default=(e=>i.a.createElement(s.a,null,i.a.createElement(o.a,{path:\"/Login\",component:r.a,exact:!0}),i.a.createElement(o.a,{path:\"/Login/Login\",component:c.a,exact:!0})))}}]);","extractedComments":[]}